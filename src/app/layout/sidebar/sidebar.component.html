<nav class="sidebar-glass d-flex flex-column p-3" style="overflow: hidden;">
  <!-- Brand -->
  <a class="navbar-brand fw-bold d-flex align-items-center gap-2 mb-4">
    <i class="bi bi-speedometer2 fs-5"></i> <span>Dashboard</span>
  </a>

  <!-- Scrollable Menu -->
  <div class="sidebar-scroll flex-grow-1 overflow-auto">
    <ul class="nav flex-column gap-1">
      <ng-container *ngFor="let route of visibleMenu">
        <!-- Dropdown Item -->
        <li *ngIf="route.children?.length; else singleLink" class="nav-item">
          <a (click)="toggleSubmenu(route.label)"
             class="nav-link d-flex align-items-center justify-content-between py-2 px-3 fw-semibold"
             [class.active]="activeSubmenu === route.label">
            <div class="d-flex align-items-center gap-2">
              <i class="bi {{ route.icon }}"></i>
              <span>{{ route.label }}</span>
            </div>
            <i class="bi" [ngClass]="activeSubmenu === route.label ? 'bi-caret-up-fill' : 'bi-caret-down-fill'"></i>
          </a>

          <!-- Submenu -->
          <ul class="submenu list-unstyled ps-4 mt-2" [class.open]="activeSubmenu === route.label">
            <li *ngFor="let child of route.children">
              <a [routerLink]="child.path" routerLinkActive="active"
                 class="nav-link d-flex align-items-center gap-2 py-1 px-2">
                <i class="bi {{ child.icon }}"></i>
                <span>{{ child.label }}</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Single Link -->
        <ng-template #singleLink>
          <li class="nav-item">
            <a [routerLink]="route.path" routerLinkActive="active"
               class="nav-link d-flex align-items-center gap-2 py-2 px-3 fw-semibold">
              <i class="bi {{ route.icon }}"></i>
              <span>{{ route.label }}</span>
            </a>
          </li>
        </ng-template>
      </ng-container>

      <!-- Logout -->
      <li class="mt-3">
        <a (click)="logout()" class="nav-link d-flex align-items-center gap-2 py-2 px-3 fw-semibold" style="cursor:pointer;">
          <i class="bi bi-box-arrow-right"></i> <span>Logout</span>
        </a>
      </li>
    </ul>
  </div>
</nav>
